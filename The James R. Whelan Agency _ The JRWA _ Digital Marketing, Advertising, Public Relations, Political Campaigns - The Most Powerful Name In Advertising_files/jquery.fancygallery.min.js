/*
 * Fancy Gallery v1.5.2
 *
 * Copyright 2011, Rafael Dery
 *
 * Only for sale at the envato marketplaces
 */
 
(function(e){jQuery.fn.fancygallery=function(x){function j(b){l=-1;u=/\S/.test(a.allMediasSelector)?b-1:b;q=/\S/.test(a.allMediasSelector)&&0==b?p.children("a"):e(p[u]).children("a");r=0==a.imagesPerPage?1:Math.ceil(q.length/a.imagesPerPage);d&&d.children(".fg-pagination-number, .fg-navigation-dot").remove();if(("dots"==a.navigation||"pagination"==a.navigation)&&1<r){for(b=0;b<r;++b)"dots"==a.navigation?d.append('<a href="'+b+'" class="fg-navigation-dot '+a.navStyle+'"></a>'):d.children("a:last").before('<a href="'+ b+'" class="fg-pagination fg-pagination-number '+a.navStyle+'">'+(b+1)+"</a>"),0==b&&v(0);d.children(".fg-navigation-dot, .fg-pagination-number").click(function(){var a=e(this);s(a.attr("href"));return!1})}f.find(".fg-thumbHolder").empty();if(0==q.length)return f.find(".fg-thumbHolder").append("<p>This album has no media files!</p>"),!1;for(b=0;b<q.length;++b){var n=q.get(b),c=n.href,k=e(n).children("img:first").attr("src"),g=e(n).children("img:first").attr("title")?e(n).children("img:first").attr("title"): "",n=e(n).has("span").length?e(n).children("span:first").html():"";t(f.children(".fg-thumbHolder"),c,k,g,n)}f.children(".fg-thumbHolder").children(".fg-listItem:last").css("marginRight",0);"prettyphoto"==a.lightbox?(void 0==a.boxOptions.social_tools&&(a.boxOptions.social_tools='<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js">\x3c/script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div><div class="pinterest"><a href="" class="pin-it-button" count-layout="horizontal" target="_blank"><img border="0" src="http://assets.pinterest.com/images/PinExt.png" title="Pin It" /></a></div>'), a.boxOptions.changepicturecallback=function(){var a=e("#fullResImage").attr("src"),h=e(".pp_pic_holder .ppt").text();e(".pp_pic_holder .pin-it-button").attr("href","http://pinterest.com/pin/create/button/?url="+encodeURIComponent(document.URL)+"&media="+encodeURIComponent(a)+"&description="+encodeURIComponent(h)+"")},f.find("a.fg-image").prettyPhoto(a.boxOptions)):f.find("a.fg-image").fancybox(a.boxOptions);a.showOnlyFirstThumbnail?(f.children(".fg-thumbHolder").children(".fg-listItem:first").show(), d&&d.hide()):s(0)}function t(b,c,d,k,j){var l="";/\S/.test(a.hoverImage)&&(l='<img src="'+a.hoverImage+'" class="fg-hover-image" />');"fancybox"==a.lightbox&&(j=k);b.append('<li class="fg-listItem" style="width:'+(a.thumbWidth+2*a.borderThickness)+"px; height:"+(a.thumbHeight+a.titleHeight+2*a.borderThickness)+"px; margin: 0 "+a.columnOffset+"px "+a.rowOffset+'px 0;"><a href="'+c+'" title="'+j+'" rel="prettyphoto['+f.attr("id")+']" class="fg-image"><img class="fg-thumb" src="'+d+'" alt="'+k+'" />'+ l+'</a><span class="fg-title"></span><img src="'+a.shadowImage+'" class="fg-shadow" width='+(a.thumbWidth+2*a.borderThickness)+" /></li>");c=f.find(".fg-listItem:last");1<b.children("li").size()&&0==(b.children("li").size()-1)%a.columns&&c.css("clear","both").prev("li").css("marginRight",0);a.secondThumbnail&&(b=a.timthumbUrl+"?src="+d+a.timthumbParameters+"&q=100&h="+a.thumbHeight+"&w="+a.thumbWidth,-1!=d.indexOf("timthumb.php")&&(b=d+a.timthumbParameters),c.find(".fg-thumb").after('<img class="fg-second-thumb" src="'+ b+'" alt="'+k+'" title=" " style="top: '+a.borderThickness+"px; left: "+a.borderThickness+'px;" />'));/\S/.test(a.hoverImage)&&void 0==g&&c.find(".fg-hover-image").load(function(){g=e(this).width();m=e(this).height()});""==a.shadowImage&&c.children(".fg-shadow").css("display","none");a.showTitle&&k.length?(c.children(".fg-title").text(k).css("height",a.titleHeight),c.children(".fg-shadow").css("top",a.thumbHeight+a.titleHeight+a.shadowOffset+2*a.borderThickness)):c.children(".fg-shadow").css("top", a.thumbHeight+a.shadowOffset+2*a.borderThickness);c.hide().hover(function(){var h=e(this);h.data("title",h.children(".fg-image").attr("title"));h.children(".fg-image").attr("title","");var c=a.secondThumbnail?h.find(".fg-second-thumb").stop().fadeTo(400,0).attr("alt"):h.find(".fg-thumb").stop().fadeTo(400,a.inverseHoverEffect?a.thumbOpacity:1).attr("alt");if(/\S/.test(a.hoverImage)&&g){var b,d,f=h.find(".fg-thumb").width();switch(a.hoverImageEffect){case "fade":d={display:"block",opacity:0,left:0.5* f-0.5*g,top:0.5*a.thumbHeight-0.5*m};b={opacity:1};break;case "l2r":d={display:"block",left:-g,top:0.5*a.thumbHeight-0.5*m};b={left:0.5*f-0.5*g};break;case "r2l":d={display:"block",left:f+g,top:0.5*a.thumbHeight-0.5*m};b={left:0.5*f-0.5*g};break;case "t2b":d={display:"block",left:0.5*f-0.5*g,top:-m};b={top:0.5*a.thumbHeight-0.5*m};break;case "b2t":d={display:"block",left:0.5*f-0.5*g,top:a.thumbHeight+m},b={top:0.5*a.thumbHeight-0.5*m}}h.find(".fg-hover-image").css(d).stop().animate(b,400)}if(""== c||!a.slideTitle||0<h.find(".fg-title").height())return!1;""!=a.shadowImage&&h.find(".fg-shadow").stop().animate({top:a.thumbHeight+a.titleHeight+a.shadowOffset+2*a.borderThickness},200);var k=h.find(".fg-title").empty();h.find(".fg-title").stop().animate({height:a.titleHeight},200,function(){if(-1<w()&&8>=w())h.find(".fg-title").text(c);else{for(var b=[],d=0;d<c.length;++d)k.append("<span>"+c.charAt(d)+"</span>"),b.push(k.find("span:last").hide());"reverse"===a.textFadeDirection?b.reverse():"random"=== a.textFadeDirection&&b.shuffle();for(d in b)e(b[d]).is("span")&&e(b[d]).stop().fadeIn(50*d)}})},function(){var b=e(this);b.children(".fg-image").attr("title",b.data("title"));if(/\S/.test(a.hoverImage)&&g){var c;switch(a.hoverImageEffect){case "fade":c={opacity:0};break;case "l2r":c={left:a.thumbWidth+g};break;case "r2l":c={left:-g};break;case "t2b":c={top:a.thumbHeight+m};break;case "b2t":c={top:-m}}b.find(".fg-hover-image").stop().animate(c,200)}if(""==(a.secondThumbnail?b.find(".fg-second-thumb").stop().fadeTo(200, 1).attr("alt"):b.find(".fg-thumb").stop().fadeTo(200,a.inverseHoverEffect?1:a.thumbOpacity).attr("alt"))||!a.slideTitle)return!1;b.find(".fg-title").empty().stop().animate({height:0},200);""!=a.shadowImage&&b.find(".fg-shadow").stop().animate({top:a.thumbHeight+a.shadowOffset+2*a.borderThickness},200)});d=c.find(".fg-thumb");e(d).load(function(){var b=e(this);if("prop"==a.scaleMode){var c=a.thumbHeight/a.thumbWidth;b.height()/b.width()>c?b.height()>a.thumbHeight&&(b.attr("width",Math.round(b.width()* (a.thumbHeight/b.height()))),b.attr("height",a.thumbHeight)):b.width()>a.thumbHeight&&(b.attr("height",Math.round(b.height()*(a.thumbWidth/b.width()))),b.attr("width",a.thumbWidth))}else"stretch"==a.scaleMode?(b.attr("width",a.thumbWidth),b.attr("height",a.thumbHeight)):(b.attr("width",a.thumbWidth),b.wrap("<div style='height:"+a.thumbHeight+"px; overflow:hidden; display:block;'></div>"),b.parent().next(".fg-second-thumb").wrap("<div style='height:"+a.thumbHeight+"px; overflow:hidden; display:block;'></div>")); b.fadeTo(0,a.inverseHoverEffect?1:a.thumbOpacity);b.next(".fg-second-thumb").show().width(b.width()).height(b.height())});c.find(".fg-image").css({"background-color":a.backgroundColor,padding:a.borderThickness,width:a.thumbWidth,height:a.thumbHeight});c.find(".fg-title").css({width:a.thumbWidth,"background-color":a.backgroundColor,color:a.titleColor,paddingLeft:a.borderThickness,paddingRight:a.borderThickness,top:1+a.thumbHeight+2*a.borderThickness});c.children(".fg-image").click(function(){var a= e(this);a.attr("title",a.parent().data("title"))})}function s(b){b=Number(b);if(l==b)return!1;l=b;f.children(".fg-thumbHolder").children("li:visible").hide();for(var c=0==a.imagesPerPage?q.length:a.imagesPerPage,e=0;e<c;++e){var k=f.children(".fg-thumbHolder").children("li").eq(a.imagesPerPage*b+e);switch(a.thumbnailTransition){case "none":k.show();break;case "fade":k.fadeIn(400+50*e)}}void 0!=d&&(1<r?d.children(".fg-pagination-prev, .fg-pagination-next").css("visibility","visible"):d.children(".fg-pagination-prev, .fg-pagination-next").css("visibility", "hidden"));v(b)}function v(b){void 0!=d&&(d.children("a").removeClass(a.navStyle+"-selected"),"pagination"==a.navigation?d.children(".fg-pagination-number").eq(b).addClass(a.navStyle+"-selected"):"dots"==a.navigation&&d.children(".fg-navigation-dot").eq(b).addClass(a.navStyle+"-selected"))}function w(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a}var a=e.extend({},e.fn.fancygallery.defaults, x),p,q,c,d,r=0,l=-1,u=-1,f,g,m;return this.each(function(){f=e(this).addClass("fg-panel radykal-clearfix");p=f.children("div").hide();!a.slideTitle&&!a.showTitle&&(a.titleHeight=0);if("white"==a.navStyle||"black"==a.navStyle)a.navStyle="fg-nav-"+a.navStyle;if("dropdown"==a.albumSelection)a.dropdown&&1<p.length&&(c=f.append('<div class="fg-dropdown"><div class="fg-current-album fg-current-album-'+a.dropdownTheme+'"></div><ul class="fg-dropdown-list fg-dropdown-list-'+a.dropdownTheme+'"></ul></div>').children(".fg-dropdown"), /\S/.test(a.allMediasSelector)&&(a.allMediasSelector==a.selectAlbum&&c.children(".fg-current-album").text(a.allMediasSelector),c.children(".fg-dropdown-list").append("<li>"+a.allMediasSelector+"</li>")),e.each(f.children("div:hidden"),function(b,d){""==a.selectAlbum?0==b&&c.children(".fg-current-album").text(d.title):a.selectAlbum==d.title&&c.children(".fg-current-album").text(d.title);c.children(".fg-dropdown-list").append("<li>"+d.title+"</li>")}),c.delegate(".fg-current-album","click",function(){c.children(".fg-dropdown-list").stop().slideToggle(200)}), c.delegate("li","click",function(){c.children(".fg-dropdown-list").stop().slideUp(200);c.children(".fg-current-album").text(e(this).text());j(c.children(".fg-dropdown-list").children("li").index(this))}));else if("menu"==a.albumSelection){c=f.append("<ul class='fg-albumSelecter radykal-clearfix'></ul>").children(".fg-albumSelecter");var b="";/\S/.test(a.allMediasSelector)&&(a.allMediasSelector==a.selectAlbum&&(b="selected"),c.append("<li class='"+b+"'><a href='#'>"+a.allMediasSelector+"</a></li>")); e.each(f.children("div"),function(d,e){b=e.title==a.selectAlbum?"selected":"";0==d&&""==a.selectAlbum&&(b="selected");c.append("<li class='"+b+"'><a href='#'>"+e.title+"</a></li>")});c.children("li").children("a").click(function(){var a=e(this);if(a.parent().hasClass("selected"))return!1;c.children("li").removeClass("selected");a.parent().addClass("selected");j(c.children("li").index(c.children(".selected")));return!1})}else{c=f.append("<ul class='fg-thumbail-selection radykal-clearfix'></ul>").children(".fg-thumbail-selection"); var g=function(b,d,e){c.append('<li class="fg-album-thumbnail"><a href="#"><img src="'+d+'" /></a><div style="background: '+a.backgroundColor+';"><div class="fg-album-thumbnail-title" style="color: '+a.titleColor+';">'+b+'</div><div class="fg-album-thumbnail-length">'+e+" "+a.mediaText+"</div></div></li>")};/\S/.test(a.allMediasSelector)&&g(a.allMediasSelector,p.children("a:first").attr("href"),p.children("a").length);e.each(f.children("div:hidden"),function(a,b){var c=e(b);g(c.attr("title"),c.find("a:first").attr("href"), c.children("a").length)});c.children("li").show().children("a").click(function(){c.hide();d&&d.show();j(c.children("li").index(e(this).parent()));return!1})}a.divider&&"thumbnails"!=a.albumSelection&&f.append("<hr class='fg-line' />");f.append("<ul class='fg-thumbHolder radykal-clearfix'></ul>");d=e("<div class='fg-navigation radykal-clearfix' style='text-align: "+a.navAlignment+"'></div>");"top"==a.navPosition?f.children("div:hidden").last().after(d):f.append(d);"thumbnails"==a.albumSelection&&d.hide().append('<a href="#" class="fg-pagination fg-back-to-albums '+ a.navStyle+'">'+a.navBackText+"</a>").children(".fg-back-to-albums").click(function(){d&&d.hide();f.find(".fg-thumbHolder").empty();f.children(".fg-thumbail-selection").fadeIn(400);return!1});0!=a.imagesPerPage&&"dots"!=a.navigation&&(d.append('<a class="fg-pagination fg-pagination-prev '+a.navStyle+'" href="" title="Previous image stack">'+a.navPreviousText+"</a>").find(".fg-pagination-prev").click(function(){0==l?s(r-1):s(l-1);return!1}),d.append('<a class="fg-pagination fg-pagination-next '+a.navStyle+ '" href="#" title="Next image stack">'+a.navNextText+"</a>").find(".fg-pagination-next").click(function(){l==r-1?s(0):s(l+1);return!1}));0<p.length&&("dropdown"==a.albumSelection?""==a.selectAlbum||a.allMediasSelector==a.selectAlbum?j(0):c.find("li").each(function(b,c){c.innerHTML==a.selectAlbum&&j(b)}):"menu"==a.albumSelection&&j(c.children("li").index(c.children(".selected"))))})};Array.prototype.shuffle=function(){for(var e,j,t=0;t<this.length;t++)j=Math.floor(Math.random()*this.length),e=this[t], this[t]=this[j],this[j]=e};e.fn.fancygallery.defaults={thumbWidth:140,thumbHeight:79,backgroundColor:"#F5F5F5",titleColor:"#383634",borderThickness:3,shadowOffset:0,thumbOpacity:0.6,titleHeight:20,rowOffset:25,columnOffset:30,imagesPerPage:10,textFadeDirection:"normal",scaleMode:"stretch",shadowImage:"images/fancygallery/shadow.png",hoverImage:"",hoverImageEffect:"fade",navPosition:"bottom",selectAlbum:"",dropdown:!0,divider:!0,showTitle:!1,slideTitle:!0,inverseHoverEffect:!1,boxOptions:{},secondThumbnail:!1, timthumbUrl:"php/timthumb.php",timthumbParameters:"&zc=0&f=2",allMediasSelector:"",albumSelection:"dropdown",navigation:"arrows",navStyle:"white",navAlignment:"left",navPreviousText:"<",navNextText:">",navBackText:"&crarr;",thumbnailTransition:"fade",lightbox:"prettyphoto",columns:5,mediaText:"Media",showOnlyFirstThumbnail:!1,dropdownTheme:"white"}})(jQuery);